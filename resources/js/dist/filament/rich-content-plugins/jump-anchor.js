import{Extension as d}from"@tiptap/core";import{Plugin as s,PluginKey as c}from"@tiptap/pm/state";import{Decoration as u,DecorationSet as h}from"@tiptap/pm/view";var m=new c("jumpAnchor"),A=d.create({name:"jumpAnchor",addOptions(){return{types:["textStyle"],HTMLAttributes:{}}},addAttributes(){return{"data-anchor-id":{default:null,parseHTML:t=>t.getAttribute("data-anchor-id"),renderHTML:t=>t["data-anchor-id"]?{"data-anchor-id":t["data-anchor-id"]}:{}}}},addCommands(){return{setJumpAnchor:t=>({commands:r})=>r.setMark(this.name,t),unsetJumpAnchor:()=>({commands:t})=>t.unsetMark(this.name),toggleJumpAnchor:t=>({commands:r})=>r.toggleMark(this.name,t)}},addProseMirrorPlugins(){return[new s({key:m,props:{decorations:t=>{let r=[],{doc:e,selection:p}=t;return e.descendants((n,o)=>{n.isText&&n.marks&&n.marks.forEach(a=>{if(a.type.name===this.name&&a.attrs["data-anchor-id"]){let i=u.inline(o,o+n.nodeSize,{class:"jump-anchor","data-anchor-id":a.attrs["data-anchor-id"],title:`Jump to: ${a.attrs["data-anchor-id"]}`});r.push(i)}})}),h.create(e,r)}}})]},parseHTML(){return[{tag:"span[data-anchor-id]"}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}});export{A as default};
